<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>SB% — Simple Calculator + Charts (Monthly)</title>
<style>
  body { margin:0; background:#161616; color:#eee; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif; }
  .wrap { max-width: 1200px; margin: 18px auto; padding: 0 16px; }
  .card { background:#2a2a2a; border-radius:12px; padding:14px; margin: 14px 0; position: relative; }
  .title { margin:0 0 10px 0; font-weight:700; font-size:18px; }
  .square { width:500px; height:500px; position:relative; }
  .square canvas { display:block; }
  .calc { background:#2a2a2a; border-radius:12px; padding:14px; margin: 14px 0; }
  .calc h2 { margin: 0 0 10px 0; font-size: 20px; }
  .row { display:flex; gap:20px; align-items:center; flex-wrap:wrap; margin:6px 0; }
  .row label { width: 210px; font-weight:600; }
  .row input[type=range] { width: 380px; }
  .value { min-width: 130px; text-align:right; font-variant-numeric: tabular-nums; }
  .charts { display:flex; gap:20px; align-items:flex-start; flex-wrap:wrap; }
  .readout { position:absolute; top:8px; right:10px; background:rgba(0,0,0,0.4); padding:6px 10px; border-radius:6px; font-weight:600; }
  .readout div { line-height: 1.25; }
  input[type=number] { background:#1f1f1f; color:#fff; border:1px solid #444; border-radius:6px; padding:6px 10px; width:220px; }
  .subtle { color:#bbb; font-size:12px; }
  .ticknote { color:#bbb; font-size:12px; margin-left: 210px; }

  /* --- Info box & modal --- */
  .topRow { display: flex; gap: 20px; align-items: stretch; flex-wrap: wrap; }
  @media (min-width: 1024px) { .topRow { flex-wrap: nowrap; } }
  .info-card { background:#2a2a2a; border-radius:12px; padding:14px; margin:14px 0; min-width:260px; flex: 0 0 260px; }
  .info-card h3 { margin: 0 0 8px 0; font-size: 16px; }
  .infoBtn { background:#1f1f1f; color:#fff; border:1px solid #444; border-radius:8px; padding:10px 12px; cursor:pointer; font-weight:600; width:100%; }
  .infoBtn:hover { background:#2c2c2c; }
  .modalOverlay { position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; align-items:center; justify-content:center; z-index:9999; }
  .modal { background:#1f1f1f; color:#eee; border:1px solid #444; border-radius:12px; max-width:820px; width:92vw; padding:18px; box-shadow:0 10px 30px rgba(0,0,0,0.4); }
  .modal h3 { margin:0 0 8px 0; font-size:18px; }
  .modal .close { float:right; cursor:pointer; border:0; background:transparent; color:#bbb; font-size:20px; }
  .modal p, .modal li { line-height:1.4; }
  .modal code { background:#111; padding:2px 5px; border-radius:6px; }

</style>
</head>
<body>
<div class="wrap">
<!-- Simple Calculator -->
<div class="calc">
<h2>Calculator</h2>
<div class="row">
<label for="dateIdx">Date</label>
<input id="dateIdx" max="150" min="0" step="1" type="range" value="0"/>
<div class="value" id="dateVal"></div>
</div>
<div class="ticknote">Start: Jun 2025  •  End: Dec 2037</div>
<div class="row">
<label for="targetSB">Target Security Budget %</label>
<input id="targetSB" max="6.0" min="0" step="0.01" type="range" value="0"/>
<div class="value"><span id="targetSBVal">0</span>%</div>
</div>
<div class="row">
<label for="marketCapSlider">Market Cap (USD)</label>
<input id="marketCapSlider" max="1000" min="0" step="1" type="range" value="0"/>
<div class="value" id="mcapValRange">0</div>
</div>
<div class="row">
<label for="marketCap">Market Cap (manual entry)</label>
<input id="marketCap" min="0" step="1000000000" type="number" value="0"/>
<div class="value subtle"></div>
</div>
<div class="row">
<div><strong>Txn/day (BTC):</strong> 600,000</div>
<div><strong>Txn/day (Kaspa):</strong> <span id="kasTxnVal">259,200,000</span></div>
</div>
<div class="row" id="kaspaBpsRow" style="gap:12px;">
<label style="width:210px;"></label>
<div style="display:flex; gap:10px; flex-wrap:wrap;">
<button id="bps10" style="background:#1f1f1f;color:#fff;border:1px solid #444;border-radius:6px;padding:6px 10px;cursor:pointer;">10 bps</button>
<button id="bps32" style="background:#1f1f1f;color:#fff;border:1px solid #444;border-radius:6px;padding:6px 10px;cursor:pointer;">32 bps</button>
<button id="bps100" style="background:#1f1f1f;color:#fff;border:1px solid #444;border-radius:6px;padding:6px 10px;cursor:pointer;">100 bps</button>
</div>
</div>
<div>
</div>
</div>

<div id="infoBox" class="info-card">
  <h3>About this calculator</h3>
  <button class="infoBtn" id="infoBtn" aria-haspopup="dialog" aria-controls="infoModal">?</button>
  <div class="subtle" style="margin-top:8px;">Click for math & assumptions</div>
</div>

<!-- Charts -->
<div class="charts">
<div class="card">
<div class="title">Kaspa — SB% <span style="color:#888;font-size:0.9em;">(Total Supply: 28.7 Billion)</span></div>
<div class="square">
<canvas height="500" id="kasSquare" width="500"></canvas>
<div class="readout" id="kasReadout">
<div>KAS Price: <span id="kasPriceTop"></span></div><div>Circ. Supply: <span id="kasCircTop"></span> KAS</div><div>Yearly emissions: <span id="kasYearTop"></span> KAS</div><div>Daily emissions: <span id="kasDailyTop"></span> KAS</div><div>Target SB%: <span id="kasSBTop"></span>%</div><div>Req Fee/tx: <span id="kasFeeTop"></span></div><div>Req Fee/tx: <span id="kasFeeCoin"></span> KAS</div></div>
</div>
</div>
<div class="card">
<div class="title">Bitcoin — SB% <span style="color:#888;font-size:0.9em;">(Total Supply: 21 Million)</span></div>
<div class="square">
<canvas height="500" id="btcSquare" width="500"></canvas>
<div class="readout" id="btcReadout">
<div>BTC Price: <span id="btcPriceTop"></span></div><div>Circ. Supply: <span id="btcCircTop"></span> BTC</div><div>Yearly emissions: <span id="btcYearTop"></span> BTC</div><div>Daily emissions: <span id="btcDailyTop"></span> BTC</div><div>Target SB%: <span id="btcSBTop"></span>%</div><div>Req Fee/tx: <span id="btcFeeTop"></span></div><div>Req Fee/tx: <span id="btcFeeCoin"></span> BTC</div></div>
</div>
</div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>
  // Data
  const labels = ["2025-06-01","2025-07-01","2025-08-01","2025-09-01","2025-10-01","2025-11-01","2025-12-01","2026-01-01","2026-02-01","2026-03-01","2026-04-01","2026-05-01","2026-06-01","2026-07-01","2026-08-01","2026-09-01","2026-10-01","2026-11-01","2026-12-01","2027-01-01","2027-02-01","2027-03-01","2027-04-01","2027-05-01","2027-06-01","2027-07-01","2027-08-01","2027-09-01","2027-10-01","2027-11-01","2027-12-01","2028-01-01","2028-02-01","2028-03-01","2028-04-01","2028-05-01","2028-06-01","2028-07-01","2028-08-01","2028-09-01","2028-10-01","2028-11-01","2028-12-01","2029-01-01","2029-02-01","2029-03-01","2029-04-01","2029-05-01","2029-06-01","2029-07-01","2029-08-01","2029-09-01","2029-10-01","2029-11-01","2029-12-01","2030-01-01","2030-02-01","2030-03-01","2030-04-01","2030-05-01","2030-06-01","2030-07-01","2030-08-01","2030-09-01","2030-10-01","2030-11-01","2030-12-01","2031-01-01","2031-02-01","2031-03-01","2031-04-01","2031-05-01","2031-06-01","2031-07-01","2031-08-01","2031-09-01","2031-10-01","2031-11-01","2031-12-01","2032-01-01","2032-02-01","2032-03-01","2032-04-01","2032-05-01","2032-06-01","2032-07-01","2032-08-01","2032-09-01","2032-10-01","2032-11-01","2032-12-01","2033-01-01","2033-02-01","2033-03-01","2033-04-01","2033-05-01","2033-06-01","2033-07-01","2033-08-01","2033-09-01","2033-10-01","2033-11-01","2033-12-01","2034-01-01","2034-02-01","2034-03-01","2034-04-01","2034-05-01","2034-06-01","2034-07-01","2034-08-01","2034-09-01","2034-10-01","2034-11-01","2034-12-01","2035-01-01","2035-02-01","2035-03-01","2035-04-01","2035-05-01","2035-06-01","2035-07-01","2035-08-01","2035-09-01","2035-10-01","2035-11-01","2035-12-01","2036-01-01","2036-02-01","2036-03-01","2036-04-01","2036-05-01","2036-06-01","2036-07-01","2036-08-01","2036-09-01","2036-10-01","2036-11-01","2036-12-01","2037-01-01","2037-02-01","2037-03-01","2037-04-01","2037-05-01","2037-06-01","2037-07-01","2037-08-01","2037-09-01","2037-10-01","2037-11-01","2037-12-01"];
  
  function fmtCirc(val){
    if (val >= 1e9) return (val/1e9).toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2}) + ' B';
    if (val >= 1e6) return (val/1e6).toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2}) + ' M';
    if (val >= 1e3) return (val/1e3).toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2}) + ' K';
    return val.toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2});
  }


  // Circulating supply arrays aligned to labels
  const btcCircSupply = [19860000.00000000,19873500.00000000,19887450.00000000,19901400.00000000,19914900.00000000,19928850.00000000,19942350.00000000,19956300.00000000,19970250.00000000,19982850.00000000,19996800.00000000,20010300.00000000,20024250.00000000,20037750.00000000,20051700.00000000,20065650.00000000,20079150.00000000,20093100.00000000,20106600.00000000,20120550.00000000,20134500.00000000,20147100.00000000,20161050.00000000,20174550.00000000,20188500.00000000,20202000.00000000,20215950.00000000,20229900.00000000,20243400.00000000,20257350.00000000,20270850.00000000,20284800.00000000,20298750.00000000,20311800.00000000,20325750.00000000,20336775.00000000,20343750.00000000,20350500.00000000,20357475.00000000,20364450.00000000,20371200.00000000,20378175.00000000,20384925.00000000,20391900.00000000,20398875.00000000,20405175.00000000,20412150.00000000,20418900.00000000,20425875.00000000,20432625.00000000,20439600.00000000,20446575.00000000,20453325.00000000,20460300.00000000,20467050.00000000,20474025.00000000,20481000.00000000,20487300.00000000,20494275.00000000,20501025.00000000,20508000.00000000,20514750.00000000,20521725.00000000,20528700.00000000,20535450.00000000,20542425.00000000,20549175.00000000,20556150.00000000,20563125.00000000,20569425.00000000,20576400.00000000,20583150.00000000,20590125.00000000,20596875.00000000,20603850.00000000,20610825.00000000,20617575.00000000,20624550.00000000,20631300.00000000,20638275.00000000,20645250.00000000,20651775.00000000,20658750.00000000,20663587.50000000,20667075.00000000,20670450.00000000,20673937.50000000,20677425.00000000,20680800.00000000,20684287.50000000,20687662.50000000,20691150.00000000,20694637.50000000,20697787.50000000,20701275.00000000,20704650.00000000,20708137.50000000,20711512.50000000,20715000.00000000,20718487.50000000,20721862.50000000,20725350.00000000,20728725.00000000,20732212.50000000,20735700.00000000,20738850.00000000,20742337.50000000,20745712.50000000,20749200.00000000,20752575.00000000,20756062.50000000,20759550.00000000,20762925.00000000,20766412.50000000,20769787.50000000,20773275.00000000,20776762.50000000,20779912.50000000,20783400.00000000,20786775.00000000,20790262.50000000,20793637.50000000,20797125.00000000,20800612.50000000,20803987.50000000,20807475.00000000,20810850.00000000,20814337.50000000,20817825.00000000,20821087.50000000,20824575.00000000,20826600.00000000,20828343.75000000,20830031.25000000,20831775.00000000,20833518.75000000,20835206.25000000,20836950.00000000,20838637.50000000,20840381.25000000,20842125.00000000,20843700.00000000,20845443.75000000,20847131.25000000,20848875.00000000,20850562.50000000,20852306.25000000,20854050.00000000,20855737.50000000,20857481.25000000,20859168.75000000];
  const kasCircSupply = [26190385316.65064240,26334452018.56774521,26470246230.16617584,26594231096.85437012,26715108468.94419098,26825473738.83503342,26933072869.04682541,27034493522.91121674,27121084258.03087234,27211709062.55265045,27294452679.75387192,27375122452.47735977,27448776777.26988602,27520585067.06731415,27588270035.39324570,27650068779.37646866,27710318630.79866028,27765328853.08574295,27818960326.80735397,27869512214.41314697,27912672309.86072922,27957843138.23885345,27999085684.81601334,28039294549.14554214,28076006648.86211395,28111798615.18552399,28145535361.69551086,28176338191.86938477,28206368995.10007477,28233788169.20981979,28260520122.42331314,28285717093.96027756,28307976975.52332687,28330448915.07223511,28350966582.36710358,28370970005.01331329,28389233829.93364334,28407039899.20043564,28423823521.67861938,28439147556.29869461,28454087517.17460251,28467728224.03409576,28481027047.09973145,28493562235.10172272,28504264504.31422043,28515465368.62561417,28525692149.55659866,28535662611.58187103,28544765992.20819092,28553641210.05274963,28562006801.91696930,28569644879.98883057,28577091521.29910660,28583890565.02048492,28590519200.99258423,28596767212.72068024,28602101628.16357040,28607684562.29637146,28612781976.52270508,28617751631.61397171,28622289100.80732346,28626712845.18021011,28630882572.36481094,28634689679.40147018,28638401366.67223740,28641790267.24606323,28645094230.14022827,28648208475.21268082,28650867349.35186768,28653592544.70903778,28655975641.44147491,28658311869.10968781,28660456739.89433289,28662559427.27124405,28664552529.22788620,28666382379.25611115,28668176241.20818329,28669823170.66331863,28671437709.48281860,28672968103.54384613,28674327473.87691116,28675707262.80967712,28676974035.57088852,28678215894.29886246,28679356034.51759720,28680473751.08110046,28681533216.05985641,28682505901.86782837,28683459457.76833725,28684334909.07550049,28685193142.95816422,28686006648.27324295,28686704923.48702240,28687439639.48418427,28688114176.27782440,28688775446.67956161,28689382553.53265381,28689977720.18383789,28690541868.77332306,28691059809.00114441,28691567562.53518295,28692033726.76648712,28692490722.89525604,28692923901.60472488,28693295722.47042847,28693686947.15293884,28694046127.37045670,28694398243.55848694,28694721518.60504532,28695038435.82976913,28695338835.78331757,28695614630.86478806,28695885001.56452560,28696133226.71735001,28696376570.03403473,28696607231.10347366,28696805219.62058258,28697013540.81882477,28697204798.58724213,28697392295.15543747,28697564434.05089188,28697733187.50485229,28697893146.07608795,28698040002.40572739,28698183970.62731171,28698316146.68499756,28698445723.28919601,28698568546.48981476,28698677644.14636993,28698788380.47417831,28698890046.64281464,28698989713.41963196,28699081216.52587128,28699170919.93535995,28699255948.52754211,28699334012.79129028,28699410541.30728531,28699480801.44920349,28699549679.64274979,28699614968.79372025,28699671009.37823868,28699729974.49440002,28699784110.01738739,28699837180.76047516,28699885904.69393921,28699933670.48173523,28699978947.06333923,28700000000.00000000,28700000000.00000000,28700000000.00000000,28700000000.00000000];


  const kasPct = [5.63247779,5.38042176,5.07147152,4.78026129,4.51437596,4.25515474,4.01847704,3.78773091,3.57023542,3.38454199,3.19019666,3.01275324,2.83975723,2.68180634,2.52781322,2.38266277,2.25013598,2.12092979,2.00296103,1.88794787,1.77954033,1.68698294,1.59011423,1.50166977,1.41544202,1.33671394,1.25995711,1.18760953,1.12155216,1.05715192,0.99835131,0.94102469,0.88698943,0.83925328,0.79106310,0.74706216,0.70416512,0.66499821,0.62681310,0.59082181,0.55795909,0.52592049,0.49666834,0.46814875,0.44126720,0.41831544,0.39429538,0.37236486,0.35098247,0.33146070,0.31242728,0.29448760,0.27810838,0.26213868,0.24755775,0.23334310,0.21994366,0.20850402,0.19653152,0.18560059,0.17494310,0.16521274,0.15572528,0.14678341,0.13861988,0.13065983,0.12339162,0.11630655,0.10962845,0.10392707,0.09164171,0.08701625,0.08248110,0.07831730,0.07423617,0.07036742,0.06681535,0.06333322,0.06013598,0.05700232,0.05403145,0.05139251,0.04871415,0.04625453,0.04384451,0.04163035,0.03946070,0.03740423,0.03551692,0.03366521,0.03196611,0.03030009,0.02872054,0.02736610,0.02593916,0.02463051,0.02334601,0.02216834,0.02101230,0.01991730,0.01891260,0.01792697,0.01702146,0.01613376,0.01529312,0.01457202,0.01381277,0.01311456,0.01243162,0.01180463,0.01118909,0.01060535,0.01006993,0.00954596,0.00906395,0.00859085,0.00814319,0.00775911,0.00735469,0.00698333,0.00661960,0.00628512,0.00595828,0.00564796,0.00536181,0.00508329,0.00482639,0.00457458,0.00433676,0.00412437,0.00390944,0.00371232,0.00351901,0.00334096,0.00316672,0.00300139,0.00285005,0.00270125,0.00256517,0.00243164,0.00230446,0.00219636,0.00208190,0.00197634,0.00187333,0.00177922,0.00168638,0.00159862,0.00156047,0.00156047,0.00156047];
  const kasDailyCoins = [4428825.00000000,4230633.00000000,3987705.00000000,3758726.00000000,3549660.00000000,3345834.00000000,3159734.00000000,2978298.00000000,2807281.00000000,2661270.00000000,2508456.00000000,2368932.00000000,2232905.00000000,2108708.00000000,1987623.00000000,1873491.00000000,1769285.00000000,1667690.00000000,1574931.00000000,1484496.00000000,1399255.00000000,1326477.00000000,1250309.00000000,1180765.00000000,1112964.00000000,1051060.00000000,990706.00000000,933819.00000000,881878.00000000,831240.00000000,785005.00000000,739929.00000000,697441.00000000,659906.00000000,622014.00000000,587416.00000000,553686.00000000,522889.00000000,492864.00000000,464564.00000000,438724.00000000,413532.00000000,390531.00000000,368106.00000000,346969.00000000,328922.00000000,310035.00000000,292791.00000000,275978.00000000,260628.00000000,245662.00000000,231556.00000000,218677.00000000,206120.00000000,194655.00000000,183478.00000000,172942.00000000,163947.00000000,154533.00000000,145938.00000000,137558.00000000,129907.00000000,122447.00000000,115416.00000000,108997.00000000,102738.00000000,97023.00000000,91452.00000000,86201.00000000,81718.00000000,72058.00000000,68421.00000000,64855.00000000,61581.00000000,58372.00000000,55330.00000000,52537.00000000,49799.00000000,47285.00000000,44821.00000000,42485.00000000,40410.00000000,38304.00000000,36370.00000000,34475.00000000,32734.00000000,31028.00000000,29411.00000000,27927.00000000,26471.00000000,25135.00000000,23825.00000000,22583.00000000,21518.00000000,20396.00000000,19367.00000000,18357.00000000,17431.00000000,16522.00000000,15661.00000000,14871.00000000,14096.00000000,13384.00000000,12686.00000000,12025.00000000,11458.00000000,10861.00000000,10312.00000000,9775.00000000,9282.00000000,8798.00000000,8339.00000000,7918.00000000,7506.00000000,7127.00000000,6755.00000000,6403.00000000,6101.00000000,5783.00000000,5491.00000000,5205.00000000,4942.00000000,4685.00000000,4441.00000000,4216.00000000,3997.00000000,3795.00000000,3597.00000000,3410.00000000,3243.00000000,3074.00000000,2919.00000000,2767.00000000,2627.00000000,2490.00000000,2360.00000000,2241.00000000,2124.00000000,2017.00000000,1912.00000000,1812.00000000,1727.00000000,1637.00000000,1554.00000000,1473.00000000,1399.00000000,1326.00000000,1257.00000000,1227.00000000,1227.00000000,1227.00000000];
  const kasYearCoins  = [1616521125.00000000,1544181045.00000000,1455512325.00000000,1371934990.00000000,1295625900.00000000,1221229410.00000000,1153302910.00000000,1087078770.00000000,1024657565.00000000,971363550.00000000,915586440.00000000,864660180.00000000,815010325.00000000,769678420.00000000,725482395.00000000,683824215.00000000,645789025.00000000,608706850.00000000,574849815.00000000,541841040.00000000,510728075.00000000,484164105.00000000,456362785.00000000,430979225.00000000,406231860.00000000,383636900.00000000,361607690.00000000,340843935.00000000,321885470.00000000,303402600.00000000,286526825.00000000,270074085.00000000,254565965.00000000,240865690.00000000,227035110.00000000,214406840.00000000,202095390.00000000,190854485.00000000,179895360.00000000,169565860.00000000,160134260.00000000,150939180.00000000,142543815.00000000,134358690.00000000,126643685.00000000,120056530.00000000,113162775.00000000,106868715.00000000,100731970.00000000,95129220.00000000,89666630.00000000,84517940.00000000,79817105.00000000,75233800.00000000,71049075.00000000,66969470.00000000,63123830.00000000,59840655.00000000,56404545.00000000,53267370.00000000,50208670.00000000,47416055.00000000,44693155.00000000,42126840.00000000,39783905.00000000,37499370.00000000,35413395.00000000,33379980.00000000,31463365.00000000,29827070.00000000,26301170.00000000,24973665.00000000,23672075.00000000,22477065.00000000,21305780.00000000,20195450.00000000,19176005.00000000,18176635.00000000,17259025.00000000,16359665.00000000,15507025.00000000,14749650.00000000,13980960.00000000,13275050.00000000,12583375.00000000,11947910.00000000,11325220.00000000,10735015.00000000,10193355.00000000,9661915.00000000,9174275.00000000,8696125.00000000,8242795.00000000,7854070.00000000,7444540.00000000,7068955.00000000,6700305.00000000,6362315.00000000,6030530.00000000,5716265.00000000,5427915.00000000,5145040.00000000,4885160.00000000,4630390.00000000,4389125.00000000,4182170.00000000,3964265.00000000,3763880.00000000,3567875.00000000,3387930.00000000,3211270.00000000,3043735.00000000,2890070.00000000,2739690.00000000,2601355.00000000,2465575.00000000,2337095.00000000,2226865.00000000,2110795.00000000,2004215.00000000,1899825.00000000,1803830.00000000,1710025.00000000,1620965.00000000,1538840.00000000,1458905.00000000,1385175.00000000,1312905.00000000,1244650.00000000,1183695.00000000,1122010.00000000,1065435.00000000,1009955.00000000,958855.00000000,908850.00000000,861400.00000000,817965.00000000,775260.00000000,736205.00000000,697880.00000000,661380.00000000,630355.00000000,597505.00000000,567210.00000000,537645.00000000,510635.00000000,483990.00000000,458805.00000000,447855.00000000,447855.00000000,447855.00000000];
  const btcPct = [0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786];
  const btcDailyCoins = [450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,450.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,225.00000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,112.50000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000,56.25000000];
  const btcYearCoins  = [164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,164250.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,82125.00000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,41062.50000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000,20531.25000000];

  
  function fmtMcap(n){
    n = Math.abs(n);
    if (n >= 1e12) return (n/1e12).toFixed(2) + ' t';
    if (n >= 1e9)  return (n/1e9).toFixed(2)  + ' b';
    if (n >= 1e6)  return (n/1e6).toFixed(2)  + ' m';
    if (n >= 1e3)  return (n/1e3).toFixed(2)  + ' k';
    return n.toFixed(2);
  }
// Helpers
  function fmtNum(n){ const a=Math.abs(n); if(a>=1e9)return(n/1e9).toFixed(2)+'B'; if(a>=1e6)return(n/1e6).toFixed(2)+'M'; if(a>=1e3)return(n/1e3).toFixed(2)+'k'; return n.toFixed(2); }
  function fmtMoney(n){ const sign=n<0?'-':''; n=Math.abs(n); if(n>=1e12)return sign+'$'+(n/1e12).toFixed(2)+'T'; if(n>=1e9)return sign+'$'+(n/1e9).toFixed(2)+'B'; if(n>=1e6)return sign+'$'+(n/1e6).toFixed(2)+'M'; if(n>=1e3)return sign+'$'+(n/1e3).toFixed(2)+'k'; return sign+'$'+n.toFixed(2); }

  // Elements
  const dateIdx = document.getElementById('dateIdx');
  const targetSB = document.getElementById('targetSB');
  const targetSBVal = document.getElementById('targetSBVal');
  const dateVal = document.getElementById('dateVal');
  const mcapSlider = document.getElementById('marketCapSlider');
  let lastMcapSource = 'slider'; // or 'input'
  const mcapInput  = document.getElementById('marketCap');
  const mcapValRange = document.getElementById('mcapValRange');

  // Piecewise market-cap mapping: 0..250 => 0..$2T, 250..1000 => $2T..$300T
  function sliderToMcap(v){
    v = +v;
    if (v <= 250) return (v/250) * 2e12;
    return 2e12 + ((v-250)/750) * (3e14 - 2e12);
  }
  function mcapToSlider(m){
    m = +m;
    if (m <= 2e12) return Math.max(0, Math.min(250, Math.round((m/2e12)*250)));
    return Math.max(250, Math.min(1000, Math.round(250 + ((m-2e12)/(3e14-2e12))*750)));
  }

  function updateMcapDisplays(){
    mcapValRange.textContent = fmtMcap(sliderToMcap(mcapSlider.value));
  }

  // Marker plugin (blue vertical + green horizontal) — attach via chart plugins array
  
function markerPlugin(getXIdx, getSBPercent){
  return {
    id:'markerPlugin',
    afterDraw(chart){
      const {ctx, chartArea, scales} = chart; if(!chartArea) return;
      const xi = getXIdx(); const sb = getSBPercent();
      const x = scales.x.getPixelForValue(xi);
      const y = scales.y.getPixelForValue(sb);
      const yBottom = chartArea.bottom;
      const barOffset = 4;      // px gap from the blue line
      const barWidth  = 3;      // px width of each green bar

      ctx.save();

      // BLUE vertical date line (full height)
      ctx.strokeStyle = '#00A2FF';
      ctx.lineWidth   = 2;
      ctx.beginPath();
      ctx.moveTo(x, chartArea.top);
      ctx.lineTo(x, chartArea.bottom);
      ctx.stroke();

      // GREEN bars: one on each side of the blue line, growing bottom -> SB% height
      ctx.fillStyle = '#16C60C';
      const yTop = y; // SB% height
      // Left bar
      ctx.fillRect(x - barOffset - barWidth, yTop, barWidth, yBottom - yTop);
      // Right bar
      ctx.fillRect(x + barOffset, yTop, barWidth, yBottom - yTop);

      ctx.restore();
    }
  };
}


  
  
  


  function commonOptions(){
    return {
      responsive:false, maintainAspectRatio:false,
      scales:{
        y:{min:0,max:6, ticks:{color:'#fff', callback:v=>v+'%'}, grid:{color:'rgba(255,255,255,0.12)'}},
        x:{ticks:{color:'#fff', callback:(v)=>new Date(labels[v]).getFullYear(), autoSkip:true}, grid:{color:'rgba(255,255,255,0.08)'}}
      },
      plugins:{legend:{display:false}, lightGrayBg:{} },
      elements:{line:{borderWidth:3}, point:{radius:0}}
    };
  }

  // Charts
  const kasCtx = document.getElementById('kasSquare').getContext('2d');
  const btcCtx = document.getElementById('btcSquare').getContext('2d');

  const kasChart = new Chart(kasCtx, {
    type:'line',
    data:{ labels: labels.map((_,i)=>i), datasets:[
      {type:'line', data: labels.map(()=>0.50), stepped:true, borderWidth:0, pointRadius:0, fill:'origin', backgroundColor:'rgba(220,30,30,0.22)'},
      {type:'line', data: labels.map(()=>0.75), stepped:true, borderWidth:0, pointRadius:0, fill:'-1', backgroundColor:'rgba(255,140,0,0.22)'},
      {type:'line', data: labels.map(()=>1.00), stepped:true, borderWidth:0, pointRadius:0, fill:'-1', backgroundColor:'rgba(255,210,0,0.22)'},
      {label:'Kaspa SB%', data: [5.63247779,5.38042176,5.07147152,4.78026129,4.51437596,4.25515474,4.01847704,3.78773091,3.57023542,3.38454199,3.19019666,3.01275324,2.83975723,2.68180634,2.52781322,2.38266277,2.25013598,2.12092979,2.00296103,1.88794787,1.77954033,1.68698294,1.59011423,1.50166977,1.41544202,1.33671394,1.25995711,1.18760953,1.12155216,1.05715192,0.99835131,0.94102469,0.88698943,0.83925328,0.79106310,0.74706216,0.70416512,0.66499821,0.62681310,0.59082181,0.55795909,0.52592049,0.49666834,0.46814875,0.44126720,0.41831544,0.39429538,0.37236486,0.35098247,0.33146070,0.31242728,0.29448760,0.27810838,0.26213868,0.24755775,0.23334310,0.21994366,0.20850402,0.19653152,0.18560059,0.17494310,0.16521274,0.15572528,0.14678341,0.13861988,0.13065983,0.12339162,0.11630655,0.10962845,0.10392707,0.09164171,0.08701625,0.08248110,0.07831730,0.07423617,0.07036742,0.06681535,0.06333322,0.06013598,0.05700232,0.05403145,0.05139251,0.04871415,0.04625453,0.04384451,0.04163035,0.03946070,0.03740423,0.03551692,0.03366521,0.03196611,0.03030009,0.02872054,0.02736610,0.02593916,0.02463051,0.02334601,0.02216834,0.02101230,0.01991730,0.01891260,0.01792697,0.01702146,0.01613376,0.01529312,0.01457202,0.01381277,0.01311456,0.01243162,0.01180463,0.01118909,0.01060535,0.01006993,0.00954596,0.00906395,0.00859085,0.00814319,0.00775911,0.00735469,0.00698333,0.00661960,0.00628512,0.00595828,0.00564796,0.00536181,0.00508329,0.00482639,0.00457458,0.00433676,0.00412437,0.00390944,0.00371232,0.00351901,0.00334096,0.00316672,0.00300139,0.00285005,0.00270125,0.00256517,0.00243164,0.00230446,0.00219636,0.00208190,0.00197634,0.00187333,0.00177922,0.00168638,0.00159862,0.00156047,0.00156047,0.00156047], stepped:true, borderColor:'#fff', fill:false}
    ]},
    options: commonOptions(),
    plugins: [ markerPlugin(()=>+dateIdx.value, ()=>+targetSB.value) ]
  });

  const btcChart = new Chart(btcCtx, {
    type:'line',
    data:{ labels: labels.map((_,i)=>i), datasets:[
      {type:'line', data: labels.map(()=>0.50), stepped:true, borderWidth:0, pointRadius:0, fill:'origin', backgroundColor:'rgba(220,30,30,0.22)'},
      {type:'line', data: labels.map(()=>0.75), stepped:true, borderWidth:0, pointRadius:0, fill:'-1', backgroundColor:'rgba(255,140,0,0.22)'},
      {type:'line', data: labels.map(()=>1.00), stepped:true, borderWidth:0, pointRadius:0, fill:'-1', backgroundColor:'rgba(255,210,0,0.22)'},
      {label:'Bitcoin SB%', data: [0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.78214286,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.39107143,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.19553571,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786,0.09776786], stepped:true, borderColor:'#fff', fill:false}
    ]},
    options: commonOptions(),
    plugins: [ markerPlugin(()=>+dateIdx.value, ()=>+targetSB.value) ]
  });

  // Required fee/tx to reach target SB% above block reward
  function computeRequiredFeePerTx(chain, idx, mcapUSD, targetSBpct){
    const priceBTC = (btcCircSupply[idx]>0? mcapUSD/btcCircSupply[idx] : 0);
    const priceKAS = (kasCircSupply[idx]>0? mcapUSD/kasCircSupply[idx] : 0);
    const targetYearUSD = (targetSBpct/100) * mcapUSD;
    if (chain==='btc'){
      const blockUSDyear = btcYearCoins[idx] * priceBTC;
      const extraUSDyear = Math.max(0, targetYearUSD - blockUSDyear);
      const dailyUSD = extraUSDyear / 365.0;
      return dailyUSD / 600000;
    } else {
      const blockUSDyear = kasYearCoins[idx] * priceKAS;
      const extraUSDyear = Math.max(0, targetYearUSD - blockUSDyear);
      const dailyUSD = extraUSDyear / 365.0;
      return dailyUSD / TX_KAS;
    }
  }

  
  // Kaspa BPS buttons logic
  let TX_KAS = 259200000;
  function setKaspaBps(bps){
    if (bps === 10)  TX_KAS = 259200000;
    if (bps === 32)  TX_KAS = 829440000;
    if (bps === 100) TX_KAS = 2592000000;
    const el = document.getElementById('kasTxnVal');
    if(el) el.textContent = TX_KAS.toLocaleString();
    // Highlight active
    ['bps10','bps32','bps100'].forEach(id=>{
      const b=document.getElementById(id);
      if(b){ b.style.background = (('bps'+bps)===id)? '#3b3b3b':'#1f1f1f'; }
    });
    updateAll();
  }

  function updateAll(){
    const d = new Date(labels[+dateIdx.value]);
    dateVal.textContent = d.toLocaleDateString(undefined, { year:'numeric', month:'short' });
    targetSBVal.textContent = (+targetSB.value).toFixed(2);

    // Market cap (piecewise)
    let mcap = 0;
    if (lastMcapSource === 'slider') {
      const v = +mcapSlider.value;
      mcap = (v<=250) ? (v/250)*2e12 : (2e12 + ((v-250)/750)*(3e14-2e12));
      mcapInput.value = mcap;
    } else {
      mcap = Number(mcapInput.value) || 0;
      mcapSlider.value = mcapToSlider(mcap);
    }
    mcapValRange.textContent = fmtMcap(mcap);
    // --- Price & Circulating from arrays (formatted) ---
    const idx = +dateIdx.value;
    const btcCircNow = Math.max(0, (typeof btcCircSupply!=='undefined' && btcCircSupply[idx]) || 0);
    const kasCircNow = Math.max(0, (typeof kasCircSupply!=='undefined' && kasCircSupply[idx]) || 0);

    // Prices with max 2 decimals
    const priceBTC_live = btcCircNow > 0 ? (mcap / btcCircNow) : 0;
    const priceKAS_live = kasCircNow > 0 ? (mcap / kasCircNow) : 0;

    const btcPriceEl = document.getElementById('btcPriceTop');
    if (btcPriceEl) btcPriceEl.textContent = '$' + priceBTC_live.toLocaleString(undefined,{minimumFractionDigits:0, maximumFractionDigits:2});
    const kasPriceEl = document.getElementById('kasPriceTop');
    if (kasPriceEl) kasPriceEl.textContent = '$' + priceKAS_live.toLocaleString(undefined,{minimumFractionDigits:0, maximumFractionDigits:2});

    const btcCircEl = document.getElementById('btcCircTop');
    if (btcCircEl) btcCircEl.textContent = fmtCirc(btcCircNow);
    const kasCircEl = document.getElementById('kasCircTop');
    if (kasCircEl) kasCircEl.textContent = fmtCirc(kasCircNow);

    // Readouts: SB%, emissions, fees
    const i = +dateIdx.value;
    document.getElementById('kasSBTop').textContent   = (+targetSB.value).toFixed(2);
    document.getElementById('kasDailyTop').textContent = fmtNum(kasDailyCoins[i]);
    document.getElementById('kasYearTop').textContent  = fmtNum(kasYearCoins[i]);
    const kasUsdPerTx = computeRequiredFeePerTx('kas', i, mcap, +targetSB.value);
    document.getElementById('kasFeeTop').textContent = '$' + kasUsdPerTx.toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2});
    document.getElementById('kasFeeCoin').textContent = (priceKAS_live>0? (kasUsdPerTx/priceKAS_live): 0).toFixed(8);

    document.getElementById('btcSBTop').textContent   = (+targetSB.value).toFixed(2);
    document.getElementById('btcDailyTop').textContent = fmtNum(btcDailyCoins[i]);
    document.getElementById('btcYearTop').textContent  = fmtNum(btcYearCoins[i]);
    const btcUsdPerTx = computeRequiredFeePerTx('btc', i, mcap, +targetSB.value);
    document.getElementById('btcFeeTop').textContent = '$' + btcUsdPerTx.toLocaleString(undefined,{minimumFractionDigits:2, maximumFractionDigits:2});
    document.getElementById('btcFeeCoin').textContent = (priceBTC_live>0? (btcUsdPerTx/priceBTC_live): 0).toFixed(8);
    kasChart.update();
    btcChart.update();
  }

  // Events
  dateIdx.addEventListener('input', updateAll);
  targetSB.addEventListener('input', updateAll);
  mcapSlider.addEventListener('input', () => { lastMcapSource = 'slider'; updateAll(); });
  mcapInput.addEventListener('input', () => { lastMcapSource = 'input'; updateAll(); });

    document.getElementById('bps10').addEventListener('click', ()=> setKaspaBps(10));
  document.getElementById('bps32').addEventListener('click', ()=> setKaspaBps(32));
  document.getElementById('bps100').addEventListener('click', ()=> setKaspaBps(100));
  setKaspaBps(10);

  // Init
  lastMcapSource = 'slider';
  updateAll();
</script>

<div id="infoModalOverlay" class="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="infoModalTitle">
  <div class="modal">
    <button class="close" id="infoCloseBtn" aria-label="Close">✕</button>
    <h3 id="infoModalTitle">Calculator assumptions & math</h3>
    <p><strong>Core assumption:</strong> When computing the required fee/tx, the network is assumed to be <em>fully utilized</em> (i.e., blocks are full and daily throughput is at capacity).</p>
    <ul>
      <li><strong>Bitcoin throughput:</strong> fixed at <code>600,000 tx/day</code>.</li>
      <li><strong>Kaspa throughput:</strong> depends on the selected BPS button:
        <ul>
          <li><code>10&nbsp;bps</code> → <code>259,200,000 tx/day</code></li>
          <li><code>32&nbsp;bps</code> → <code>829,440,000 tx/day</code></li>
          <li><code>100&nbsp;bps</code> → <code>2,592,000,000 tx/day</code></li>
        </ul>
      </li>
    </ul>
    <h3 style="margin-top:14px;">Math (security budget target)</h3>
    <ol>
      <li><strong>Prices</strong> are implied from the market cap slider/input and each chain’s circulating supply for the selected date:<br/>
        <code>Price = Market&nbsp;Cap / Circ.&nbsp;Supply</code>
      </li>
      <li><strong>Target annual security budget (USD):</strong><br/>
        <code>SB<sub>target,year</sub> = (Target&nbsp;SB&nbsp;%) × Market&nbsp;Cap</code>
      </li>
      <li><strong>Block subsidy value (USD/year):</strong><br/>
        <code>Subsidy<sub>USD,year</sub> = Yearly&nbsp;emissions&nbsp;(coins) × Price</code>
      </li>
      <li><strong>Extra USD needed from fees (annual):</strong><br/>
        <code>Extra<sub>USD,year</sub> = max(0, SB<sub>target,year</sub> − Subsidy<sub>USD,year</sub>)</code>
      </li>
      <li><strong>Required fees per tx (USD):</strong> assuming full blocks / full throughput:<br/>
        <code>Fee/tx<sub>USD</sub> = (Extra<sub>USD,year</sub> / 365) / Tx/day</code>
      </li>
      <li><strong>Required fees per tx (native coin):</strong><br/>
        <code>Fee/tx<sub>coin</sub> = Fee/tx<sub>USD</sub> ÷ Price</code>
      </li>
    </ol>
    <p class="subtle">Circulating supplies and emissions (daily/yearly) are the preloaded arrays in the page and change over time with the date slider.</p>
  </div>
</div>


<script>
// Group the calculator and the info card side-by-side in a new row
(function(){
  const wrap = document.querySelector('.wrap');
  const calc = document.querySelector('.calc');
  const info = document.getElementById('infoBox');
  if (wrap && calc && info) {
    const row = document.createElement('div');
    row.className = 'topRow';
    wrap.insertBefore(row, calc);
    row.appendChild(calc);
    row.appendChild(info);
  }
})();

// Modal open/close behavior
(function(){
  const btn = document.getElementById('infoBtn');
  const overlay = document.getElementById('infoModalOverlay');
  const closeBtn = document.getElementById('infoCloseBtn');
  function openModal(){ overlay.style.display = 'flex'; }
  function closeModal(){ overlay.style.display = 'none'; }
  if (btn && overlay && closeBtn){
    btn.addEventListener('click', openModal);
    closeBtn.addEventListener('click', closeModal);
    overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeModal(); });
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });
  }
})();
</script>

</body>
</html>
